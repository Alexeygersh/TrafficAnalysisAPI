# TrafficAnalysisAPI

## ğŸ“‹ Ğ¢Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ

- .NET 9.0 SDK
- PostgreSQL 14+

# Ğ›Ğ¾Ğ³Ğ¸ĞºĞ° Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ° ÑĞµÑ‚ĞµĞ²Ğ¾Ğ³Ğ¾ Ñ‚Ñ€Ğ°Ñ„Ğ¸ĞºĞ°

## ğŸ¯ ĞĞ±Ñ‰Ğ°Ñ ĞºĞ¾Ğ½Ñ†ĞµĞ¿Ñ†Ğ¸Ñ

Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° Ğ¿Ñ€ĞµĞ´Ğ½Ğ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ° Ğ´Ğ»Ñ:
1. **Ğ¡Ğ±Ğ¾Ñ€Ğ°** ÑĞµÑ‚ĞµĞ²Ñ‹Ñ… Ğ¿Ğ°ĞºĞµÑ‚Ğ¾Ğ²
2. **ĞĞ½Ğ°Ğ»Ğ¸Ğ·Ğ°** Ñ‚Ñ€Ğ°Ñ„Ğ¸ĞºĞ° Ñ Ğ¿Ğ¾Ğ¼Ğ¾Ñ‰ÑŒÑ ML-Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸
3. **ĞšĞ»Ğ°ÑÑĞ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ğ¸** ÑƒĞ³Ñ€Ğ¾Ğ·
4. **Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸** Ğ¾Ñ‚Ñ‡ĞµÑ‚Ğ¾Ğ² Ğ´Ğ»Ñ Ğ°Ğ½Ğ°Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ¾Ğ²

---

## ğŸ“Š ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      CLIENT LAYER                        â”‚
â”‚  (Postman) Swagger / Angular                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚ HTTP/HTTPS + JWT Bearer Token
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ASP.NET Core Web API                        â”‚
â”‚                                                                    â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    |
â”‚    â”‚                  AUTHENTICATION LAYER                    â”‚    â”‚
â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚
â”‚    â”‚  â”‚  JWT Middleware                                    â”‚  â”‚    â”‚
â”‚    â”‚  â”‚  - ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ñ‚Ğ¾ĞºĞµĞ½Ğ°                                 â”‚  â”‚    â”‚
â”‚    â”‚  â”‚  - Ğ˜Ğ·Ğ²Ğ»ĞµÑ‡ĞµĞ½Ğ¸Ğµ Claims (User, Role)                  â”‚  â”‚    â”‚
â”‚    â”‚  â”‚  - Policy-based authorization                      â”‚  â”‚    â”‚
â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                         â”‚                                          â”‚
â”‚                         â–¼                                          â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚    â”‚                   CONTROLLER LAYER                       â”‚    â”‚
â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚
â”‚    â”‚  â”‚ Auth         â”‚ Packets      â”‚ Analysis              â”‚ â”‚    â”‚
â”‚    â”‚  â”‚ Controller   â”‚ Controller   â”‚ Controller            â”‚ â”‚    â”‚
â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚
â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚
â”‚    â”‚  â”‚ Sessions     â”‚ Reports                              â”‚ â”‚    â”‚
â”‚    â”‚  â”‚ Controller   â”‚ Controller (LINQ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑÑ‹)            â”‚ â”‚    â”‚
â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                         â”‚                                          â”‚
â”‚                         â–¼                                          â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚    â”‚                 BUSINESS LOGIC LAYER                     â”‚    â”‚
â”‚    â”‚  (ĞœĞµÑ‚Ğ¾Ğ´Ñ‹ Ğ² Ğ¼Ğ¾Ğ´ĞµĞ»ÑÑ…)                                      â”‚    â”‚
â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚
â”‚    â”‚  â”‚ NetworkPacket:                                     â”‚  â”‚    â”‚
â”‚    â”‚  â”‚  - CalculateThreatScore()                          â”‚  â”‚    â”‚
â”‚    â”‚  â”‚  - GetPacketCategory()                             â”‚  â”‚    â”‚
â”‚    â”‚  â”‚  - IsFromSameSource()                              â”‚  â”‚    â”‚
â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚
â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚
â”‚    â”‚  â”‚ TrafficAnalysis:                                   â”‚  â”‚    â”‚
â”‚    â”‚  â”‚  - ClassifyThreat()                                â”‚  â”‚    â”‚
â”‚    â”‚  â”‚  - GenerateReport()                                â”‚  â”‚    â”‚
â”‚    â”‚  â”‚  - UpdateConfidence()                              â”‚  â”‚    â”‚
â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚
â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚
â”‚    â”‚  â”‚ TrafficSession:                                    â”‚  â”‚    â”‚
â”‚    â”‚  â”‚  - AddPacket()                                     â”‚  â”‚    â”‚
â”‚    â”‚  â”‚  - GetAnomalousPackets()                           â”‚  â”‚    â”‚
â”‚    â”‚  â”‚  - CalculateStatistics()                           â”‚  â”‚    â”‚
â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                         â”‚                                          â”‚
â”‚                         â–¼                                          â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚    â”‚                 DATA ACCESS LAYER                        â”‚    â”‚
â”‚    â”‚  (Entity Framework Core)                                 â”‚    â”‚
â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚
â”‚    â”‚  â”‚ ApplicationDbContext                               â”‚  â”‚    â”‚
â”‚    â”‚  â”‚  - Users                                           â”‚  â”‚    â”‚
â”‚    â”‚  â”‚  - NetworkPackets                                  â”‚  â”‚    â”‚
â”‚    â”‚  â”‚  - TrafficAnalyses                                 â”‚  â”‚    â”‚
â”‚    â”‚  â”‚  - TrafficSessions                                 â”‚  â”‚    â”‚
â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                         â”‚ Npgsql Provider                          â”‚
â”‚                         â”‚                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â–¼                       
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  DATABASE LAYER                          â”‚
â”‚              PostgreSQL Database                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚ Users    â”‚ Network  â”‚ Traffic  â”‚ Traffic  â”‚           â”‚
â”‚  â”‚          â”‚ Packets  â”‚ Analyses â”‚ Sessions â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---
## ğŸ”„ Ğ–Ğ¸Ğ·Ğ½ĞµĞ½Ğ½Ñ‹Ğ¹ Ñ†Ğ¸ĞºĞ» Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ°

### 1ï¸âƒ£ ĞĞ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ¸ Ğ°ÑƒÑ‚ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ

```
ĞšĞ»Ğ¸ĞµĞ½Ñ‚ â†’ POST /api/Auth/login {username, password}
           â”‚
           â–¼
    AuthController.Login()
           â”‚
           â”œâ”€â†’ ĞŸĞ¾Ğ¸ÑĞº Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ Ğ² Ğ‘Ğ”
           â”‚   (ApplicationDbContext.Users)
           â”‚
           â”œâ”€â†’ ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ¿Ğ°Ñ€Ğ¾Ğ»Ñ
           â”‚   (ÑƒĞ¿Ñ€Ğ¾Ñ‰ĞµĞ½Ğ½Ğ°Ñ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ¸Ğ»Ğ¸ BCrypt)
           â”‚
           â”œâ”€â†’ Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ JWT Ñ‚Ğ¾ĞºĞµĞ½Ğ°
           â”‚   - Claims: UserId, Username, Role
           â”‚   - Expiration: 24 Ñ‡Ğ°ÑĞ°
           â”‚   - SecretKey Ğ¸Ğ· appsettings.json
           â”‚
           â””â”€â†’ Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‚ Ñ‚Ğ¾ĞºĞµĞ½Ğ° ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ñƒ
                {token, username, role}
```


### Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° JWT Ñ‚Ğ¾ĞºĞµĞ½Ğ°

```
eyJhbGciO9...
Header (Ğ°Ğ»Ğ³Ğ¾Ñ€Ğ¸Ñ‚Ğ¼) + Payload (Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ) + Signature (Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑÑŒ)

```

### 2ï¸âƒ£ ĞĞ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ (Ñ Ñ‚Ğ¾ĞºĞµĞ½Ğ¾Ğ¼)

```
ĞšĞ»Ğ¸ĞµĞ½Ñ‚ â†’ GET /api/Packets
         Header: Authorization: Bearer <token>
           â”‚
           â–¼
    [Authorize] Attribute
           â”‚
           â”œâ”€â†’ Middleware Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ÑĞµÑ‚ JWT
           â”‚   - Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ½Ğ¾ÑÑ‚ÑŒ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞ¸
           â”‚   - Ğ¡Ñ€Ğ¾Ğº Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ
           â”‚   - Issuer/Audience
           â”‚
           â”œâ”€â†’ Ğ˜Ğ·Ğ²Ğ»ĞµÑ‡ĞµĞ½Ğ¸Ğµ Claims
           â”‚   - Role: Admin Ğ¸Ğ»Ğ¸ Analyst
           â”‚
           â”œâ”€â†’ ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Policy
           â”‚   - AuthorizedUser: Ğ»ÑĞ±Ğ¾Ğ¹ Ğ°Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹
           â”‚   - AdminOnly: Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Admin
           â”‚
           â”œâ”€â†’ [Success] â†’ Ğ’Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ğµ Ğ¼ĞµÑ‚Ğ¾Ğ´Ğ° ĞºĞ¾Ğ½Ñ‚Ñ€Ğ¾Ğ»Ğ»ĞµÑ€Ğ°
           â”‚
           â””â”€â†’ [Fail] â†’ 401 Unauthorized Ğ¸Ğ»Ğ¸ 403 Forbidden
```


## ğŸ¯ Ğ¡Ñ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¸ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ

### Ğ¡Ñ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¹ 1: Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ ÑĞµÑÑĞ¸Ğ¸ Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³Ğ°

```
STEP 1: ĞĞ½Ğ°Ğ»Ğ¸Ñ‚Ğ¸Ğº Ğ½Ğ°Ñ‡Ğ¸Ğ½Ğ°ĞµÑ‚ Ğ½Ğ¾Ğ²ÑƒÑ ÑĞµÑÑĞ¸Ñ
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
POST /api/Sessions (Admin token)
{
  "sessionName": "Traffic 2025-09-30",
  "description": "ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³ Ñ‚Ñ€Ğ°Ñ„Ğ¸ĞºĞ°"
}

â†“ SessionsController.CreateSession()
  â”‚
  â”œâ”€â†’ ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ°Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ ([Authorize] AdminOnly)
  â”‚
  â”œâ”€â†’ Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ DTO (Required, StringLength)
  â”‚
  â”œâ”€â†’ Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ TrafficSession
  â”‚   - StartTime = DateTime.UtcNow
  â”‚   - EndTime = null (ÑĞµÑÑĞ¸Ñ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ°)
  â”‚
  â”œâ”€â†’ _context.TrafficSessions.Add()
  â”œâ”€â†’ await _context.SaveChangesAsync()
  â”‚
  â””â”€â†’ Return 201 Created
      Location: /api/Sessions/1
      Body: {id: 1, sessionName: "...", ...}
```

### Ğ¡Ñ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¹ 2: Ğ—Ğ°Ñ…Ğ²Ğ°Ñ‚ Ğ¸ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ· Ğ¿Ğ°ĞºĞµÑ‚Ğ°

```
STEP 2: ĞŸĞ¾ÑÑ‚ÑƒĞ¿Ğ°ĞµÑ‚ ÑĞµÑ‚ĞµĞ²Ğ¾Ğ¹ Ğ¿Ğ°ĞºĞµÑ‚
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
POST /api/Packets (Admin token)
{
  "sourceIP": "192.168.1.100",
  "destinationIP": "203.0.113.5",
  "port": 3389,
  "protocol": "TCP",
  "packetSize": 2048,
  "sessionId": 1
}

â†“ PacketsController.CreatePacket()
  â”‚
  â”œâ”€â†’ ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ÑÑƒÑ‰ĞµÑÑ‚Ğ²Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ ÑĞµÑÑĞ¸Ğ¸
  â”‚   SELECT * FROM TrafficSessions WHERE Id = 1
  â”‚
  â”œâ”€â†’ Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ NetworkPacket
  â”‚   - Timestamp = DateTime.UtcNow
  â”‚
  â”œâ”€â†’ Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ² Ğ‘Ğ”
  â”‚   INSERT INTO NetworkPackets (...)
  â”‚
  â””â”€â†’ Return 201 Created {id: 42, ...}


STEP 3: ML-Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€ÑƒĞµÑ‚ Ğ¿Ğ°ĞºĞµÑ‚
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
POST /api/Analysis (Admin token)
{
  "packetId": 42,
  "mlModelScore": 0.87,
  "description": "ĞŸĞ¾Ğ´Ğ¾Ğ·Ñ€Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾Ğµ RDP Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ"
}

â†“ AnalysisController.CreateAnalysis()
  â”‚
  â”œâ”€â†’ Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ TrafficAnalysis
  â”‚
  â”œâ”€â†’ Ğ‘Ğ˜Ğ—ĞĞ•Ğ¡-Ğ›ĞĞ“Ğ˜ĞšĞ: analysis.ClassifyThreat()
  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚   â”‚ if (MLModelScore >= 0.8)           â”‚
  â”‚   â”‚   ThreatLevel = "Critical"         â”‚
  â”‚   â”‚   IsMalicious = true               â”‚
  â”‚   â”‚ else if (MLModelScore >= 0.6)      â”‚
  â”‚   â”‚   ThreatLevel = "High"             â”‚
  â”‚   â”‚ ...                                â”‚
  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â”‚   Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚: ThreatLevel = "Critical", IsMalicious = true
  â”‚
  â”œâ”€â†’ Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ² Ğ‘Ğ”
  â”‚   INSERT INTO TrafficAnalyses (...)
  â”‚
  â””â”€â†’ Return 201 Created
      {id: 5, threatLevel: "Critical", isMalicious: true}
```

### Ğ¡Ñ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¹ 3: ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ ÑĞ²Ğ¾Ğ´Ğ½Ğ¾Ğ³Ğ¾ Ğ¾Ñ‚Ñ‡ĞµÑ‚Ğ°

```
STEP 4: ĞĞ½Ğ°Ğ»Ğ¸Ñ‚Ğ¸Ğº Ğ·Ğ°Ğ¿Ñ€Ğ°ÑˆĞ¸Ğ²Ğ°ĞµÑ‚ Ğ¾Ñ‚Ñ‡ĞµÑ‚
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
GET /api/Reports/suspicious-packets (Analyst token)

â†“ ReportsController.GetSuspiciousPackets()
  â”‚
  â”œâ”€â†’ LINQ Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ Ñ Ğ¾Ğ±ÑŠĞµĞ´Ğ¸Ğ½ĞµĞ½Ğ¸ĞµĞ¼ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†:
  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚   â”‚ _context.NetworkPackets                â”‚
  â”‚   â”‚   .Include(p => p.Analysis)            â”‚
  â”‚   â”‚   .Include(p => p.Session)             â”‚
  â”‚   â”‚   .Where(p => p.Analysis.IsMalicious)  â”‚ â† Ğ¤Ğ¸Ğ»ÑŒÑ‚Ñ€
  â”‚   â”‚   .Select(p => new {               })  â”‚ â† ĞŸÑ€Ğ¾ĞµĞºÑ†Ğ¸Ñ
  â”‚   â”‚   .OrderByDescending(p => p.MLScore)   â”‚ â† Ğ¡Ğ¾Ñ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²ĞºĞ°
  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â”‚
  â”œâ”€â†’ EF Core Ğ³ĞµĞ½ĞµÑ€Ğ¸Ñ€ÑƒĞµÑ‚ SQL:
  â”‚   SELECT p.Id, p.SourceIP, p.Port, a.ThreatLevel, ...
  â”‚   FROM NetworkPackets p
  â”‚   INNER JOIN TrafficAnalyses a ON p.Id = a.PacketId
  â”‚   LEFT JOIN TrafficSessions s ON p.SessionId = s.Id
  â”‚   WHERE a.IsMalicious = true
  â”‚   ORDER BY a.MLModelScore DESC
  â”‚
  â”œâ”€â†’ PostgreSQL Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ÑĞµÑ‚ Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ
  â”‚
  â””â”€â†’ Return 200 OK
      [
        {packetId: 42, sourceIP: "192.168.1.100", 
         port: 3389, threatLevel: "Critical", ...},
        ...
      ]
```

## ğŸ§® Ğ‘Ğ¸Ğ·Ğ½ĞµÑ-Ğ»Ğ¾Ğ³Ğ¸ĞºĞ°

### Ğ Ğ°ÑÑ‡ĞµÑ‚ Ğ±Ğ°Ğ»Ğ»Ğ° ÑƒĞ³Ñ€Ğ¾Ğ·Ñ‹ (NetworkPacket.CalculateThreatScore)

```csharp
// Ğ’Ñ‹Ğ·Ğ¾Ğ² Ñ‡ĞµÑ€ĞµĞ· GET /api/Packets/threat-score/42

public double CalculateThreatScore()
{...}

// ĞŸÑ€Ğ¸Ğ¼ĞµÑ€:
// Port = 3389 (RDP) â†’ +30
// PacketSize = 2048 â†’ +20
// Protocol = TCP â†’ +0
// Ğ˜Ğ¢ĞĞ“Ğ: 50 Ğ±Ğ°Ğ»Ğ»Ğ¾Ğ² (Medium threat)
```

### ĞšĞ»Ğ°ÑÑĞ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ ÑƒĞ³Ñ€Ğ¾Ğ· (TrafficAnalysis.ClassifyThreat)

```csharp
// Ğ’Ñ‹Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ÑÑ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ Ğ¿Ñ€Ğ¸ POST /api/Analysis

public void ClassifyThreat()
{...}

// ĞŸÑ€Ğ¸Ğ¼ĞµÑ€: MLModelScore = 0.87 
// â†’ ThreatLevel = "Critical", IsMalicious = true
```

### ĞŸĞ¾Ğ¸ÑĞº Ğ°Ğ½Ğ¾Ğ¼Ğ°Ğ»Ğ¸Ğ¹ (TrafficSession.GetAnomalousPackets)

```csharp
// Ğ’Ñ‹Ğ·Ğ¾Ğ² Ñ‡ĞµÑ€ĞµĞ· GET /api/Sessions/anomalous-packets/1

public List<NetworkPacket> GetAnomalousPackets()
{...}

// Ğ›Ğ¾Ğ³Ğ¸ĞºĞ°:
// 1. Ğ”Ğ»Ñ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾ Ğ¿Ğ°ĞºĞµÑ‚Ğ° Ğ²Ñ‹Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ÑÑ CalculateThreatScore()
// 2. ĞŸĞ°ĞºĞµÑ‚Ñ‹ Ñ Ğ±Ğ°Ğ»Ğ»Ğ¾Ğ¼ > 50 ÑÑ‡Ğ¸Ñ‚Ğ°ÑÑ‚ÑÑ Ğ°Ğ½Ğ¾Ğ¼Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¼Ğ¸
// 3. Ğ¡Ğ¾Ñ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²ĞºĞ° Ğ¿Ğ¾ ÑƒĞ±Ñ‹Ğ²Ğ°Ğ½Ğ¸Ñ Ğ±Ğ°Ğ»Ğ»Ğ°
// 4. Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‚ ÑĞ¿Ğ¸ÑĞºĞ°
```

### Ğ¡Ñ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ° ÑĞµÑÑĞ¸Ğ¸ (TrafficSession.CalculateStatistics)

```csharp
// Ğ’Ñ‹Ğ·Ğ¾Ğ² Ñ‡ĞµÑ€ĞµĞ· GET /api/Sessions/statistics/1

public Dictionary<string, object> CalculateStatistics()
{...}

```


## ğŸš€ Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° Ğ¸ Ğ·Ğ°Ğ¿ÑƒÑĞº

### 1. ĞšĞ»Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ñ€ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ñ

```bash
git clone <your-repo-url>
cd TrafficAnalysisAPI
```

### 2. ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° Ğ±Ğ°Ğ·Ñ‹ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… PostgreSQL

Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ¹Ñ‚Ğµ Ğ±Ğ°Ğ·Ñƒ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…:

```sql
CREATE DATABASE TrafficAnalysisDB;
```

ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚Ğµ ÑÑ‚Ñ€Ğ¾ĞºÑƒ Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ñ Ğ² `appsettings.json`:

```json
"ConnectionStrings": {
  "DefaultConnection": "Host=localhost;Port=5432;Database=TrafficAnalysisDB;Username=postgres;Password=Ğ²Ğ°Ñˆ_Ğ¿Ğ°Ñ€Ğ¾Ğ»ÑŒ"
}
```

## Ğ¨Ğ°Ğ³ 3: Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° Ğ¿Ğ°ĞºĞµÑ‚Ğ¾Ğ²

```bash
dotnet add package Microsoft.EntityFrameworkCore
dotnet add package Microsoft.EntityFrameworkCore.Design
dotnet add package Npgsql.EntityFrameworkCore.PostgreSQL
dotnet add package Microsoft.AspNetCore.Authentication.JwtBearer
dotnet add package BCrypt.Net-Next
```


### 4. ĞŸÑ€Ğ¸Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğµ Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ğ¹

```bash
dotnet ef migrations add InitialCreate
dotnet ef database update
```
Ğ¸Ğ»Ğ¸ Ñ‡ĞµÑ€ĞµĞ· nuget console

```bash
Add-Migration InitialCreate
Update-Database
```

Ğ˜Ğ»Ğ¸ Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ğ¸ Ğ¿Ñ€Ğ¸Ğ¼ĞµĞ½ÑÑ‚ÑÑ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ Ğ¿Ñ€Ğ¸ Ğ¿ĞµÑ€Ğ²Ğ¾Ğ¼ Ğ·Ğ°Ğ¿ÑƒÑĞºĞµ.

### 5. Ğ—Ğ°Ğ¿ÑƒÑĞº Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ

```bash
dotnet run
```

API Ğ±ÑƒĞ´ĞµÑ‚ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ĞµĞ½ Ğ¿Ğ¾ Ğ°Ğ´Ñ€ĞµÑÑƒ: `https://localhost:port`

Swagger UI: `https://localhost:port/swagger`

## ğŸ‘¥ Ğ£Ñ‡ĞµÑ‚Ğ½Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¿Ğ¾ ÑƒĞ¼Ğ¾Ğ»Ñ‡Ğ°Ğ½Ğ¸Ñ

### ĞĞ´Ğ¼Ğ¸Ğ½Ğ¸ÑÑ‚Ñ€Ğ°Ñ‚Ğ¾Ñ€
- **Username:** `admin`
- **Password:** `Admin123!`
- **Ğ Ğ¾Ğ»ÑŒ:** Admin (Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ÑÑ‚ÑŒ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ)

### ĞĞ½Ğ°Ğ»Ğ¸Ñ‚Ğ¸Ğº
- **Username:** `analyst`
- **Password:** `Analyst123!`
- **Ğ Ğ¾Ğ»ÑŒ:** Analyst (Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ¿Ñ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€ Ğ¾Ñ‚Ñ‡ĞµÑ‚Ğ¾Ğ²)

## ğŸ“š ĞÑĞ½Ğ¾Ğ²Ğ½Ğ°Ñ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°

```
TrafficAnalysisAPI/
â”œâ”€â”€ Controllers/
â”‚   â”œâ”€â”€ AuthController.cs          # ĞĞ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ JWT
â”‚   â”œâ”€â”€ PacketsController.cs       # CRUD Ğ´Ğ»Ñ Ğ¿Ğ°ĞºĞµÑ‚Ğ¾Ğ²
â”‚   â”œâ”€â”€ AnalysisController.cs      # CRUD Ğ´Ğ»Ñ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ°
â”‚   â”œâ”€â”€ SessionsController.cs      # CRUD Ğ´Ğ»Ñ ÑĞµÑÑĞ¸Ğ¹
â”‚   â””â”€â”€ ReportsController.cs       # Ğ¡Ğ²Ğ¾Ğ´Ğ½Ñ‹Ğµ Ğ¾Ñ‚Ñ‡ĞµÑ‚Ñ‹ (LINQ)
â”œâ”€â”€ Models/
â”‚   â””â”€â”€ Models.cs                  # NetworkPacket, TrafficAnalysis, TrafficSession, User
â”œâ”€â”€ Data/
â”‚   â””â”€â”€ ApplicationDbContext.cs    # ĞšĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚ Ğ‘Ğ”
â”œâ”€â”€ Program.cs                     # ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ
â””â”€â”€ appsettings.json              # ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸
```

### ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ñ‚Ğ¾ĞºĞµĞ½Ğ°

```http
POST /api/Auth/login
Content-Type: application/json

{
  "username": "admin",
  "password": "Admin123!"
}
```

ĞÑ‚Ğ²ĞµÑ‚:
```json
{
  "token": "eyJhbGciOiJIUzI1N...",
  "username": "admin",
  "role": "Admin"
}
```

### Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ñ‚Ğ¾ĞºĞµĞ½Ğ°

Ğ”Ğ¾Ğ±Ğ°Ğ²ÑŒÑ‚Ğµ Ğ·Ğ°Ğ³Ğ¾Ğ»Ğ¾Ğ²Ğ¾Ğº Ğº Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ°Ğ¼:
```
Authorization: Bearer <Ğ²Ğ°Ñˆ_Ñ‚Ğ¾ĞºĞµĞ½>
```

## ğŸ“Š API Endpoints

### ĞĞ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ
- `POST /api/Auth/login` - ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ JWT Ñ‚Ğ¾ĞºĞµĞ½

### ĞŸĞ°ĞºĞµÑ‚Ñ‹ (NetworkPackets)
- `GET /api/Packets` - Ğ’ÑĞµ Ğ¿Ğ°ĞºĞµÑ‚Ñ‹ (Ñ‚Ñ€ĞµĞ±ÑƒĞµÑ‚ Ğ°Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸)
- `GET /api/Packets/{id}` - ĞŸĞ°ĞºĞµÑ‚ Ğ¿Ğ¾ ID
- `POST /api/Packets` - Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ¿Ğ°ĞºĞµÑ‚ (Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Admin)
- `PUT /api/Packets/{id}` - ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ¿Ğ°ĞºĞµÑ‚ (Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Admin)
- `DELETE /api/Packets/{id}` - Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ Ğ¿Ğ°ĞºĞµÑ‚ (Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Admin)
- `GET /api/Packets/threat-score/{id}` - Ğ‘Ğ°Ğ»Ğ» ÑƒĞ³Ñ€Ğ¾Ğ·Ñ‹

### ĞĞ½Ğ°Ğ»Ğ¸Ğ· (TrafficAnalysis)
- `GET /api/Analysis` - Ğ’ÑĞµ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ñ‹ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ°
- `GET /api/Analysis/{id}` - ĞĞ½Ğ°Ğ»Ğ¸Ğ· Ğ¿Ğ¾ ID
- `POST /api/Analysis` - Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ· (Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Admin)
- `PUT /api/Analysis/{id}` - ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ
- `DELETE /api/Analysis/{id}` - Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ
- `GET /api/Analysis/report/{id}` - ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ¾Ñ‚Ñ‡ĞµÑ‚
- `POST /api/Analysis/update-confidence/{id}` - ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ ML-ÑĞºĞ¾Ñ€

### Ğ¡ĞµÑÑĞ¸Ğ¸ (TrafficSessions)
- `GET /api/Sessions` - Ğ’ÑĞµ ÑĞµÑÑĞ¸Ğ¸
- `GET /api/Sessions/{id}` - Ğ¡ĞµÑÑĞ¸Ñ Ğ¿Ğ¾ ID
- `POST /api/Sessions` - Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ÑĞµÑÑĞ¸Ñ (Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Admin)
- `PUT /api/Sessions/{id}` - ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ
- `DELETE /api/Sessions/{id}` - Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ
- `GET /api/Sessions/statistics/{id}` - Ğ¡Ñ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ° ÑĞµÑÑĞ¸Ğ¸
- `GET /api/Sessions/anomalous-packets/{id}` - ĞĞ½Ğ¾Ğ¼Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¿Ğ°ĞºĞµÑ‚Ñ‹
- `POST /api/Sessions/close/{id}` - Ğ—Ğ°Ğ²ĞµÑ€ÑˆĞ¸Ñ‚ÑŒ ÑĞµÑÑĞ¸Ñ

### ĞÑ‚Ñ‡ĞµÑ‚Ñ‹ (Reports) - LINQ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑÑ‹
Ğ’ÑĞµ Ñ‚Ñ€ĞµĞ±ÑƒÑÑ‚ Ğ°Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸:

1. `GET /api/Reports/suspicious-packets` - ĞŸĞ¾Ğ´Ğ¾Ğ·Ñ€Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ğ¿Ğ°ĞºĞµÑ‚Ñ‹ Ñ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ¾Ğ¼
2. `GET /api/Reports/threats-by-protocol` - Ğ£Ğ³Ñ€Ğ¾Ğ·Ñ‹ Ğ¿Ğ¾ Ğ¿Ñ€Ğ¾Ñ‚Ğ¾ĞºĞ¾Ğ»Ğ°Ğ¼
3. `GET /api/Reports/top-malicious-ips?top=10` - Ğ¢Ğ¾Ğ¿ Ğ²Ñ€ĞµĞ´Ğ¾Ğ½Ğ¾ÑĞ½Ñ‹Ñ… IP
4. `GET /api/Reports/source-history/{ip}` - Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ñ Ğ¸ÑÑ‚Ğ¾Ñ‡Ğ½Ğ¸ĞºĞ°
5. `GET /api/Reports/time-based-summary?hours=24` - Ğ¡Ğ²Ğ¾Ğ´ĞºĞ° Ğ¿Ğ¾ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸
6. `GET /api/Reports/session-detailed/{id}` - Ğ”ĞµÑ‚Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ¾Ñ‚Ñ‡ĞµÑ‚ Ğ¿Ğ¾ ÑĞµÑÑĞ¸Ğ¸

## ğŸ§ª Ğ¢ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ

### Ğ¡ Ğ¿Ğ¾Ğ¼Ğ¾Ñ‰ÑŒÑ Postman

1. Ğ˜Ğ¼Ğ¿Ğ¾Ñ€Ñ‚Ğ¸Ñ€ÑƒĞ¹Ñ‚Ğµ ĞºĞ¾Ğ»Ğ»ĞµĞºÑ†Ğ¸Ñ `TrafficAnalysisAPI_postman_collection.json`
2. Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚Ğµ Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ "Login as Admin"
3. Ğ¢Ğ¾ĞºĞµĞ½ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ ÑĞ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑÑ Ğ² Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ñ…
4. Ğ¢ĞµÑÑ‚Ğ¸Ñ€ÑƒĞ¹Ñ‚Ğµ Ğ¾ÑÑ‚Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ endpoints

### Ğ¡ Ğ¿Ğ¾Ğ¼Ğ¾Ñ‰ÑŒÑ Swagger

1. ĞÑ‚ĞºÑ€Ğ¾Ğ¹Ñ‚Ğµ `https://localhost:port/swagger`
2. Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ ĞºĞ½Ğ¾Ğ¿ĞºÑƒ "Authorize" (ğŸ”“)
3. Ğ’Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ Ñ‚Ğ¾ĞºĞµĞ½ Ğ² Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğµ: `Bearer <Ğ²Ğ°Ñˆ_Ñ‚Ğ¾ĞºĞµĞ½>`
4. Ğ¢ĞµÑÑ‚Ğ¸Ñ€ÑƒĞ¹Ñ‚Ğµ API Ñ‡ĞµÑ€ĞµĞ· UI



## ğŸ“„ Ğ›Ğ¸Ñ†ĞµĞ½Ğ·Ğ¸Ñ

Ğ£Ñ‡ĞµĞ±Ğ½Ñ‹Ğ¹ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚


